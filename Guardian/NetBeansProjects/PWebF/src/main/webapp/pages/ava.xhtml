<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui"
    template="/templates/template.xhtml"
    class="style">
    <ui:define name="titulo" >Disponibilidade - </ui:define>
    <ui:define name="link"> <p:commandLink value="Inicio" action="f1w"/> </ui:define>
    <ui:define name="loggedUser" > Usuario: <h:outputText value="#{soldierMB.king}" style="font-weight: bold"/> </ui:define>
    <ui:define name="conteudo">
        <p:tabView id="tva">
            
            <p:tab title="Cadastrar">
                <h:form>
                    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
                    <p:panelGrid style="margin-bottom:10px" >
                    <br/>
                    <h:outputLabel for="menuT" value="Professor:" />
                    <p:selectOneMenu id="menuT" value="#{avaMBean.trg}" label="Professores" effect="fold"
                                          filter="true" filterMatchMode="startsWith" >
                        <f:selectItem itemLabel="Select One" itemValue=""/>
                        <f:selectItems var="teacher" value="#{teacherMBean.listAll}" itemLabel="#{teacher.name}" itemValue="#{teacher.rg}"/>
                    </p:selectOneMenu>
                    <br/>
                    </p:panelGrid>
                    
                    <p:panelMenu style=" width: 810px;">
                        <p:submenu label="Segunda-Feira" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar">                            
                                <h:outputText value="Horarios:" />
                                <br/>
                                <p:selectManyButton value="#{avaMBean.selectedShiftsM}">
                                    <f:selectItems var="shift" value="#{shiftMBean.listAll}" itemLabel="#{shift.group}" itemValue="#{shift.group}" />
                                </p:selectManyButton>                            
                                <p:commandButton value="Submit" update="displayM" icon="ui-icon-check" />
                                <br/>
                                <p:spacer />
                                <h:outputText value="Selected:" />
                                <p:dataList id="displayM" value="#{avaMBean.selectedShiftsM}" var="M" emptyMessage="Nenhum horario selecionado">
                                    <h:outputText value="#{M}" style="font-weight: bold" />
                                </p:dataList>
                            </p:menuitem>
                        </p:submenu>
                    
                    
                        <p:submenu label="Terça-Feira" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar">                            
                                <h:outputText value="Horarios:" />
                                <br/>
                                <p:selectManyButton value="#{avaMBean.selectedShiftsTu}">
                                    <f:selectItems var="shift" value="#{shiftMBean.listAll}" itemLabel="#{shift.group}" itemValue="#{shift.group}" />
                                </p:selectManyButton>
                                <p:commandButton value="Submit" update="displayTu" icon="ui-icon-check" />
                                <br/>
                                <p:spacer />
                                <h:outputText value="Selected:" />
                                <p:dataList id="displayTu" value="#{avaMBean.selectedShiftsTu}" var="Tu" emptyMessage="Nenhum horario selecionado">
                                    <h:outputText value="#{Tu}" style="font-weight: bold" />
                                </p:dataList>
                            </p:menuitem>  
                        </p:submenu>
                       
                        <p:submenu label="Quarta-Feira" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar">                            
                                <h:outputText value="Horarios:" />
                                <br/>
                                <p:selectManyButton value="#{avaMBean.selectedShiftsW}">
                                    <f:selectItems var="shift" value="#{shiftMBean.listAll}" itemLabel="#{shift.group}" itemValue="#{shift.group}" />
                                </p:selectManyButton>
                                <p:commandButton value="Submit" update="displayw" icon="ui-icon-check" />
                                <br/>
                                <p:spacer />
                                <h:outputText value="Selected:" />
                                <p:dataList id="displayw" value="#{avaMBean.selectedShiftsW}" var="W" emptyMessage="Nenhum horario selecionado">
                                    <h:outputText value="#{W}" style="font-weight: bold" />
                                </p:dataList>
                            </p:menuitem>
                        </p:submenu>                      
                        
                        <p:submenu label="Quinta-Feira" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar">                            
                                <h:outputText value="Horarios:" />
                                <br/>
                                <p:selectManyButton value="#{avaMBean.selectedShiftsTh}">
                                    <f:selectItems var="shift" value="#{shiftMBean.listAll}" itemLabel="#{shift.group}" itemValue="#{shift.group}" />
                                </p:selectManyButton>
                                <p:commandButton value="Submit" update="displayth" icon="ui-icon-check" />
                                <br/>
                                <p:spacer/>
                                <h:outputText value="Selected:" />
                                <p:dataList id="displayth" value="#{avaMBean.selectedShiftsTh}" var="Th" emptyMessage="Nenhum horario selecionado">
                                    <h:outputText value="#{Th}" style="font-weight: bold" />
                                </p:dataList>
                            </p:menuitem>
                        </p:submenu>    

                        <p:submenu label="Sexta-Feira" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar">                            
                                <h:outputText value="Horarios:" />
                                <br/>
                                <p:selectManyButton value="#{avaMBean.selectedShiftsF}">
                                    <f:selectItems var="shift" value="#{shiftMBean.listAll}" itemLabel="#{shift.group}" itemValue="#{shift.group}" />
                                </p:selectManyButton>
                                <p:commandButton value="Submit" update="displayf" icon="ui-icon-check" />
                                <br/>
                                <p:spacer />
                                <h:outputText value="Selected:" />
                                <p:dataList id="displayf" value="#{avaMBean.selectedShiftsF}" var="F" emptyMessage="Nenhum horario selecionado">
                                    <h:outputText value="#{F}" style="font-weight: bold" />
                                </p:dataList>
                            </p:menuitem>
                        </p:submenu> 
                        
                        <p:submenu label="Sabado" style="font-weight: bold;">
                            <p:menuitem icon="ui-icon-calendar" value="08:00-12:00" />
                        </p:submenu>
                    </p:panelMenu>   
                        <p:commandButton value="SALVAR" update="tva" icon="ui-icon-disk" action="#{avaMBean.save}" ajax="false"/>
                        
                </h:form>
                
            </p:tab>
            
            <p:tab title="Lista Disponibilidade">
                
                <h:form id="fa2">
                    
                    <p:dataTable var="available" value="#{avaMBean.listFull}" scrollable="true" scrollHeight="300" style="width: 98%;" emptyMessage="Nenhuma disponibilidade cadastrada" >
                        
                        <p:column headerText="Id" footerText="Id" style="width: 10%;" sortBy="#{available.id}">
                            <h:outputText value="#{available.id}"/>
                        </p:column>
                        
                        <p:column headerText="Professor" footerText="Professor" style="width: 30%;" sortBy="#{available.teacher.name}" filterBy="#{available.teacher.name}" >
                            <h:outputText value="#{available.teacher.name}"/>
                        </p:column> 
                        
                        <p:column headerText="Dia" footerText="Dia" style="width: 10%;" filterBy="#{availale.days}">
                             
                            <ui:repeat value="#{available.days}" var="day" >
                                #{day.name}                              
                                <ui:repeat value="#{day.shifts}" var="shift">
                                    #{shift.group}
                                </ui:repeat>
                                <br/>
                            </ui:repeat>                                
                        </p:column>
                        
                        <p:column headerText="Ação" footerText="Ação" style="width: 10%; text-align: center;">
                            <p:commandButton icon="ui-icon-search" ajax="true" action="#{avaMBean.selectAva(available)}"/>
                            <p:commandButton icon="ui-icon-trash" ajax="false" update="tva:fa2" action="#{avaMBean.deleteAva(available)}" onclick="return confirm('Excluir a disponibilidade de #{available.teacher.name} ?')"/>
                        </p:column>
                    </p:dataTable>
                    
                </h:form>
            </p:tab>
        </p:tabView>
        
    </ui:define>      
    
</ui:composition>